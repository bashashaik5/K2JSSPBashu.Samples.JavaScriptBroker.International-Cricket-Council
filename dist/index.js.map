{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import \"@k2oss/k2-broker-core\";\n\nmetadata = {\n  systemName: \"com.k2.icc\",\n  displayName: \"International Cricket Council\",\n  description: \"A Test Custom Broker to retreive details of ICC, you can browse details of cricket teams associated with ICC.\",\n  configuration: {\n    \"typeOfSource\": {\n      displayName: \"Typeof Source\",\n      type: \"string\",\n      value: \"Teams\"\n    }\n  },\n};\n\nondescribe = async function ({ configuration }): Promise<void> {\n  postSchema({\n    objects: {\n      \"teams\": {\n        displayName: \"Cricket Teams\",\n        description: \"Internation Cricket Teams associated with ICC\",\n        properties: {\n          \"id\": {\n            displayName: \"ID\",\n            type: \"number\",\n          },\n          \"name\": {\n            displayName: \"Name\",\n            type: \"string\",\n          },\n          \"continent\": {\n            displayName: \"Continent\",\n            type: \"string\"\n          }\n        },\n        methods: {\n          \"getTeams\": {\n            displayName: \"Get Teams\",\n            type: \"list\",\n            outputs: [\"id\", \"name\", \"continent\"]\n          }\n        }\n      }\n    }\n  });\n};\n\nonexecute = async function ({ objectName, methodName, parameters, properties, configuration }): Promise<void> {\n  switch (objectName) {\n    case \"teams\":\n      await onexecuteTeams(methodName, properties, parameters, configuration); break;\n    default:\n      throw new Error(\"The object \" + objectName + \" is not supported.\");\n  }\n};\n\nasync function onexecuteTeams(methodName: string, properties: SingleRecord, parameters: SingleRecord, configuration: SingleRecord): Promise<void> {\n  switch (methodName) {\n    case \"getTeams\": await onexecuteTeamsGetList(parameters, properties, configuration); break;\n    default: throw new Error(\"The method \" + methodName + \" is not supported.\");\n  }\n}\n\nasync function onexecuteTeamsGetList(parameters: SingleRecord, properties: SingleRecord, configuration: SingleRecord): Promise<void> {\n  return new Promise<void>((resolve, reject) => {\n    const teamsObj = [\n      {\n        \"id\": 1,\n        \"name\": \"India\",\n        \"cont\": \"ASIA\"\n      },\n      {\n        \"id\": 2,\n        \"name\": \"Australia\",\n        \"cont\": \"ASIA\"\n      },\n      {\n        \"id\": 3,\n        \"name\": \"England\",\n        \"cont\": \"Europe\"\n      },\n      {\n        \"id\": 4,\n        \"name\": \"South Africa\",\n        \"cont\": \"Africa\"\n      }\n    ]\n\n    const teamIds = teamsObj.map(x => x.id);\n    const teamNames = teamsObj.map(x => x.name);\n    const teamCont = teamsObj.map(x => x.cont);\n\n    postResult({\n      \"id\": teamIds.toString(),\n      \"name\": teamNames.toString(),\n      \"continent\": teamCont.toString()\n    });\n  });\n\n}\n\n\n\n"],"names":["metadata","systemName","displayName","description","configuration","type","value","ondescribe","async","postSchema","objects","properties","methods","outputs","onexecute","objectName","methodName","parameters","Promise","resolve","reject","teamsObj","teamIds","map","x","id","teamNames","name","teamCont","cont","postResult","toString","onexecuteTeamsGetList","Error","onexecuteTeams"],"mappings":"AAEAA,SAAW,CACTC,WAAY,aACZC,YAAa,gCACbC,YAAa,gHACbC,cAAe,cACG,CACdF,YAAa,gBACbG,KAAM,SACNC,MAAO,WAKbC,WAAaC,gBAAgBJ,cAAEA,IAC7BK,WAAW,CACTC,QAAS,OACE,CACPR,YAAa,gBACbC,YAAa,gDACbQ,WAAY,IACJ,CACJT,YAAa,KACbG,KAAM,eAEA,CACNH,YAAa,OACbG,KAAM,oBAEK,CACXH,YAAa,YACbG,KAAM,WAGVO,QAAS,UACK,CACVV,YAAa,YACbG,KAAM,OACNQ,QAAS,CAAC,KAAM,OAAQ,oBAQpCC,UAAYN,gBAAgBO,WAAEA,EAAFC,WAAcA,EAAdC,WAA0BA,EAA1BN,WAAsCA,EAAtCP,cAAkDA,WACpEW,OACD,cAOTP,eAA8BQ,EAAoBL,EAA0BM,EAA0Bb,UAC5FY,OACD,iBAKTR,eAAqCS,EAA0BN,EAA0BP,UAChF,IAAIc,QAAc,CAACC,EAASC,WAC3BC,EAAW,CACf,IACQ,OACE,aACA,QAEV,IACQ,OACE,iBACA,QAEV,IACQ,OACE,eACA,UAEV,IACQ,OACE,oBACA,WAINC,EAAUD,EAASE,IAAIC,GAAKA,EAAEC,IAC9BC,EAAYL,EAASE,IAAIC,GAAKA,EAAEG,MAChCC,EAAWP,EAASE,IAAIC,GAAKA,EAAEK,MAErCC,WAAW,IACHR,EAAQS,gBACNL,EAAUK,qBACLH,EAASG,eArCDC,uBACR,IAAIC,MAAM,cAAgBjB,EAAa,uBAT9CkB,CAAelB,uBAEf,IAAIiB,MAAM,cAAgBlB,EAAa"}